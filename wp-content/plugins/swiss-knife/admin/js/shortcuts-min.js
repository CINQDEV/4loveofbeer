function swkIsMacintosh(){return navigator.platform.indexOf("Mac")>-1}jQuery(document).ready((function(s){var e;(s=jQuery)(document).on("keydown",(function(n){if(s(".sc-key").is(":focus")){var t=s(this),c=String.fromCharCode(n.charCode?n.charCode:n.which);if(!/^[A-Za-z0-9 ]+$/.test(c))return s(t).val(""),!1;console.log("here2"),n.preventDefault?n.preventDefault():n.returnValue=!1,e=s(".sc-key:focus").parents(".sc-row"),s(e).find(".sc-key").val(n.originalEvent.key).prop("disabled",!0),s(e).find(".sc-clear-key").show()}})),s(".sc-clear-key").click((function(){s(this).hide(),e=s(this).parents(".sc-row"),s(e).find(".sc-key").prop("disabled",!1).val("").focus()})),s(".sc-save-shortcuts").click((function(e){e.preventDefault();var n,t,c,i=s(this),a=[];s(i).find(".spinner").addClass("show"),s(i).addClass("disabled"),s(".sc-row").each((function(){n=s(this),""!=s(n).find(".sc-key").val()&&("","","",c=[],t=s(n).data("shortcut"),s(n).find("input.ctrl").is(":checked")&&(swkIsMacintosh()?c.push("command"):c.push("ctrl")),s(n).find("input.alt").is(":checked")&&(swkIsMacintosh()?c.push("option"):c.push("alt")),s(n).find("input.shift").is(":checked")&&c.push("shift"),c.push(s(n).find(".sc-key").val()),c.length>0&&a.push({action:t,combination:c.join("+"),key:s(n).find(".sc-key").val()}))})).promise().done((function(){s.ajax({url:swk_shortcuts.ajaxurl,type:"post",data:{action:"saveShortcuts",shortcuts:a,verify_nonce:swk_shortcuts.swk_nonce},success:function(e){s(i).find(".spinner").removeClass("show"),s(i).removeClass("disabled")}})}))}))}));